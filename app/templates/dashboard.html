{% extends 'base.html' %}
{% block content %}
<h2>Welcome, {{ current_user.username }}{% if is_admin %} (Admin){% endif %}</h2>

<section class="cards">
  <div class="card">
    <h3>Pre-Test</h3>
    {% if pre %}
      <p>Completed. Score: {{ pre.score }}</p>
    {% else %}
      <a class="btn" href="{{ url_for('core.pretest') }}">Take Pre-Test</a>
    {% endif %}
  </div>
  <div class="card">
    <h3>Post-Test</h3>
    {% if post %}
      <p>Completed. Score: {{ post.score }}</p>
    {% else %}
      <a class="btn" href="{{ url_for('core.posttest') }}">Take Post-Test</a>
    {% endif %}
  </div>
</section>

<h3>Lessons</h3>
<div class="grid">
  {% for l in lessons %}
  <a class="tile" href="{{ url_for('core.lesson', slug=l.slug) }}">
    <strong>{{ l.topic }}</strong>
    <span>Read lesson & practice</span>
  </a>
  {% endfor %}
</div>

{% if is_admin %}
<hr>
<h3>Admin Overview</h3>
<ul>
  <li>Total users: {{ stats.total_users }}</li>
  <li>Admins: {{ stats.total_admins }} (max 3)</li>
</ul>
{% endif %}
{% endblock %}